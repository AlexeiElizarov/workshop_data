{% extends 'main.html' %}

{% block title %}
    Коэффициенты всех операторов
{% endblock title %}

{% block content %}
    <table class="table table-success table-striped">
        <thead>
        <tr>
            <th scope="col">#</th>
<!--            <th scope="col">Дата</th>-->
            <th scope="col">Станок</th>
            <th scope="col">Оператор</th>
            <th scope="col">Изделие.Деталь</th>
            <th scope="col">Количество</th>
            <th scope="col">Смена/по программе</th>
<!--            <th scope="col">Барфидер</th>-->
            <th scope="col">Коэффициент/Средний</th>
<!--            <th scope="col">Средний коэффициент</th>-->
            <th scope="col"></th>
        </tr>
        </thead>

        <tbody>
            {% for time_record in time_records %}
            {% ifchanged time_record.date %}
                <tr class="table-light">
                    <td></td>
                    <td><h5><strong>{{ time_record.date }}</strong></h5></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                {% endifchanged %}
                <tr>
                    <th scope="row">{{ forloop.counter }}</th>
<!--                        <td></td>-->
                        <td>
                            {{ time_record.get_machine_display }}
                            {% if time_record.barfider %}
                                <abbr title="барфидер" style="text-decoration: none;">(&#10004;)</abbr>
                            {% endif %}
                        </td>
                        <td>{{ time_record.worker.get_full_name }}</td>
                        <td>{{ time_record.product }} <strong>{{ time_record.detail }}</strong></td>
                        <td>{{ time_record.quantity_1 }} / {{ time_record.quantity_2 }} / {{ time_record.quantity }}</td>
                        <td>{{ time_record.work_time }} /
                            <strong>{{ time_record.green_time }}</strong></td>
<!--                        <td>{{ time_record.green_time }}</td>-->
<!--                        <td>-->
<!--                            {% if time_record.barfider %}-->
<!--                                &#10004;-->
<!--                            {% endif %}-->
<!--                            </td>-->
                        <td>
                            {{ time_record.coefficient }} /
                            <strong>{{ time_record.coefficient_for_day }}</strong> /
                        {{ time_record.worker.average_coefficient_operator }}</td>
<!--                        <td>{{ time_record.worker.average_coefficient_operator }}</td>-->
                        <td>
                            <button class="btn btn-outline-primary dropdown-toggle btn-sm" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Действия
                            </button>
                            <ul class="dropdown-menu">
                                <li>
                                    <a class="dropdown-item" href="
                                    {% url 'edit_record_operator_work_time' worker=time_record.worker date=time_record.date id=time_record.id %}">
                                        Исправить
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="
                                    {% url 'delete_record_operator_work_time' worker=time_record.worker date=time_record.date id=time_record.id %}">
                                        Удалить
                                    </a>
                                </li>
                            </ul>
                        </td>

                </tr>
            {% endfor %}

        </tbody>
    </table>
{% endblock content %}
