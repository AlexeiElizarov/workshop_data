# Generated by Django 4.0.6 on 2022-10-23 16:29

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import workshop_data.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='BatchDetailInPlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity_in_batch', models.SmallIntegerField(default=0, verbose_name='Количество в партии')),
                ('ready', models.BooleanField(default=False)),
                ('sos', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='CategoryDetail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='Comment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('body', models.TextField()),
            ],
        ),
        migrations.CreateModel(
            name='Detail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=150, verbose_name='Деталь')),
                ('category', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, to='workshop_data.categorydetail', verbose_name='Категория')),
            ],
        ),
        migrations.CreateModel(
            name='Product',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='Изделие')),
                ('detail', models.ManyToManyField(blank=True, related_name='product', to='workshop_data.detail', verbose_name='Деталь')),
            ],
        ),
        migrations.CreateModel(
            name='StageManufacturingDetail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order', models.PositiveSmallIntegerField(verbose_name='Порядок')),
                ('name', models.CharField(choices=[('', 'Выберите вид работы'), ('LSM', 'Слесарый'), ('TRN', 'Токарный'), ('MLR', 'Фрезеровальный'), ('GRN', 'Шлифовальный')], max_length=3, verbose_name='Вид работы')),
                ('operations', models.CharField(max_length=300, verbose_name='Операции')),
                ('normalized_time', models.FloatField(default=0, verbose_name='Нормированное время')),
                ('price', models.FloatField(default=0, verbose_name='Расценка')),
                ('detail', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='stages', to='workshop_data.detail', verbose_name='Деталь')),
            ],
        ),
        migrations.CreateModel(
            name='WorkshopPlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity_state_order', models.PositiveSmallIntegerField(default=0, verbose_name='Госзаказ')),
                ('quantity_commercial_order', models.PositiveSmallIntegerField(default=0, verbose_name='Коммерция')),
                ('in_work', models.PositiveSmallIntegerField(default=0, verbose_name='Колличество в работе')),
                ('month', models.PositiveSmallIntegerField(choices=[(1, 'январь'), (2, 'февраль'), (3, 'март'), (4, 'апрель'), (5, 'май'), (6, 'июнь'), (7, 'июль'), (8, 'август'), (9, 'сентябрь'), (10, 'октябрь'), (11, 'ноябрь'), (12, 'декабрь'), (13, 'не укзан')], default=13, verbose_name='_Месяц_')),
                ('sos', models.BooleanField(default=False)),
                ('year', models.PositiveIntegerField(default=2022, validators=[django.core.validators.MinValueValidator(2022), workshop_data.models.max_value_current_year])),
                ('detail', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='workshop_data.detail')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='workshop_data.product', verbose_name='_Изделие_')),
            ],
        ),
        migrations.CreateModel(
            name='StageManufacturingDetailInWork',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('start_of_work', models.DateTimeField(auto_now_add=True)),
                ('in_work', models.BooleanField(default=True, verbose_name='В работе')),
                ('time_of_work', models.SmallIntegerField(blank=True, default=0, verbose_name='Время')),
                ('batch', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='stages', to='workshop_data.batchdetailinplan', verbose_name='Партия')),
                ('comment_in_batch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='workshop_data.comment', verbose_name='Комментарий')),
                ('stage_in_batch', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='workshop_data.stagemanufacturingdetail', verbose_name='Этап')),
                ('worker', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Рабочий')),
            ],
        ),
        migrations.CreateModel(
            name='Order',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateTimeField(auto_now_add=True)),
                ('month', models.PositiveSmallIntegerField(choices=[(1, 'январь'), (2, 'февраль'), (3, 'март'), (4, 'апрель'), (5, 'май'), (6, 'июнь'), (7, 'июль'), (8, 'август'), (9, 'сентябрь'), (10, 'октябрь'), (11, 'ноябрь'), (12, 'декабрь'), (13, 'не укзан')], default=13, verbose_name='Месяц')),
                ('workshop', models.PositiveSmallIntegerField(default=464)),
                ('section', models.PositiveSmallIntegerField(default=1)),
                ('employee_number', models.PositiveSmallIntegerField()),
                ('operations', models.TextField(verbose_name='Операции')),
                ('quantity', models.PositiveSmallIntegerField(default=0, verbose_name='Количество')),
                ('normalized_time', models.FloatField(default=0, verbose_name='Нормированное время')),
                ('price', models.FloatField(default=0, verbose_name='Расценка')),
                ('detail', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='workshop_data.detail', verbose_name='Деталь')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='workshop_data.product', verbose_name='Изделие')),
                ('surname', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='Рабочий')),
            ],
        ),
        migrations.CreateModel(
            name='Node',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Узел')),
                ('detail', models.ManyToManyField(related_name='node', to='workshop_data.detail')),
                ('product', models.ManyToManyField(related_name='node', to='workshop_data.product')),
            ],
        ),
        migrations.AddField(
            model_name='batchdetailinplan',
            name='comment',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='workshop_data.comment', verbose_name='Комментарий'),
        ),
        migrations.AddField(
            model_name='batchdetailinplan',
            name='workshopplan_detail',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='batchs', to='workshop_data.workshopplan'),
        ),
    ]
